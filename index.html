<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>GourmetWorld</title>
    

  </head>
    
  <body>
  <html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GourmetWorld Pro | 2026</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --primary: #ff6b35;
            --primary-hover: #e85a2a;
            --dark: #121212;
            --bg: #fdfdfd;
            --card-bg: #ffffff;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --border: rgba(0,0,0,0.08);
            --whatsapp: #25d366;
            --ai-accent: #000000;
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --border: rgba(255,255,255,0.1);
            --dark: #ffffff;
            --ai-accent: #ffffff;
        }

        * { box-sizing: border-box; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text-main); margin: 0; overflow-x: hidden; }

        /* --- UI Elements --- */
        .shipping-promo { background: var(--primary); color: white; text-align: center; padding: 10px; font-size: 0.85rem; font-weight: 700; position: sticky; top: 0; z-index: 1100; }

        header {
            background: var(--card-bg); backdrop-filter: blur(15px); padding: 1rem 6%;
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 40px; z-index: 1000; border-bottom: 1px solid var(--border);
        }

        .logo { font-family: 'Playfair Display', serif; font-size: 1.6rem; font-weight: 700; color: var(--dark); text-decoration: none; }
        .logo span { color: var(--primary); }

        /* --- Filtros con Scroll Inteligente --- */
        .filter-container { background: var(--card-bg); border-bottom: 1px solid var(--border); }
        .filter-bar { 
            display: flex; justify-content: flex-start; gap: 12px; padding: 15px 6%; 
            overflow-x: auto; white-space: nowrap; scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }
        .filter-bar::-webkit-scrollbar { display: none; }

        .filter-btn {
            flex-shrink: 0; padding: 10px 24px; border-radius: 50px; border: 1px solid var(--border);
            background: var(--bg); color: var(--text-main); cursor: pointer; font-weight: 600;
        }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 15px rgba(255,107,53,0.3); }

        /* --- Grid & Cards --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; padding: 40px 6%; max-width: 1400px; margin: 0 auto; }
        .card { background: var(--card-bg); border-radius: 30px; overflow: hidden; border: 1px solid var(--border); }
        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        
        .img-container { height: 240px; position: relative; cursor: pointer; overflow: hidden; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; }
        .img-container:hover img { scale: 1.1; }

        .card-body { padding: 25px; }
        .price { font-weight: 800; font-size: 1.4rem; color: var(--primary); margin: 10px 0; }

        /* --- Buttons --- */
        .btn { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 14px; border-radius: 16px; font-weight: 700; cursor: pointer; border: none; font-family: inherit; width: 100%; text-decoration: none; font-size: 0.9rem; }
        .btn-main { background: var(--primary); color: white; margin-bottom: 10px; }
        .btn-outline { background: transparent; color: var(--text-main); border: 1px solid var(--border); }
        .btn-ai { background: var(--ai-accent); color: #98e9e1; }

        /* --- Carrito --- */
        #cart-drawer {
            position: fixed; right: -100%; top: 0; width: 420px; height: 100%;
            background: var(--card-bg); z-index: 2001; padding: 30px;
            box-shadow: -20px 0 60px rgba(0,0,0,0.15); display: flex; flex-direction: column;
        }
        #cart-drawer.open { right: 0; }

        /* --- Modales --- */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; backdrop-filter: blur(8px); padding: 20px; }
        .modal-content { background: var(--card-bg); margin: auto; width: 100%; max-width: 800px; border-radius: 30px; overflow: hidden; max-height: 90vh; display: flex; flex-direction: column; }
        .modal-body-scroll { padding: 35px; overflow-y: auto; }

        @media (max-width: 600px) { #cart-drawer { width: 100%; } .grid { padding: 20px 4%; } }
    </style>
</head>
<body>

    <div class="shipping-promo">üöö Env√≠o GRATIS a partir de $50.00</div>

    <header>
        <a href="#" class="logo"><i data-lucide="chef-hat"></i> Gourmet<span>World</span></a>
        <div style="display:flex; gap:12px">
            <button class="filter-btn" style="padding:10px" onclick="toggleTheme()"><i data-lucide="sun" id="theme-icon"></i></button>
            <button class="filter-btn" style="background:var(--dark); color:var(--bg)" onclick="toggleCart()">
                <i data-lucide="shopping-bag"></i> <span id="cart-count">0</span>
            </button>
        </div>
    </header>

    <div class="filter-container">
        <div class="filter-bar" id="countryMenu">
            </div>
    </div>

    <main id="recipeGrid" class="grid"></main>

    <div id="cart-drawer">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2>üõí Mi Pedido</h2>
            <button onclick="toggleCart()" style="border:none; background:none; cursor:pointer; color:var(--text-main)"><i data-lucide="x"></i></button>
        </div>
        <div id="cart-list" style="flex-grow:1; overflow-y:auto; margin:20px 0"></div>
        <div style="background:var(--bg); padding:20px; border-radius:20px; border: 1px solid var(--border)">
            <p id="shipping-msg" style="font-size:0.85rem; margin-bottom:10px; text-align:center; font-weight:600"></p>
            <div style="display:flex; justify-content:space-between; font-weight:800; font-size:1.4rem">
                <span>Total:</span> <span id="cart-total">$0.00</span>
            </div>
            <button class="btn btn-main" style="background:var(--whatsapp); margin-top:15px" onclick="sendOrder()">
                Confirmar por WhatsApp
            </button>
        </div>
    </div>

    <div id="recipeModal" class="modal">
        <div class="modal-content animate__animated animate__zoomIn">
            <div id="modalImg" style="height:300px; background-size:cover; background-position:center; position:relative;">
                <button onclick="closeModal()" style="position:absolute; right:20px; top:20px; background:white; border:none; border-radius:50%; width:40px; height:40px; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 5px 15px rgba(0,0,0,0.2)"><i data-lucide="x"></i></button>
            </div>
            <div class="modal-body-scroll" id="modalBody"></div>
        </div>
    </div>

    <script>
        const WHATSAPP_PHONE = "521234567890";
        let cart = [];
        let currentFilter = 'Todos';

       // 1. EL ARREGLO COMPLETO DE RECETAS (36 PLATOS)
const recetas = [
    { id: 1, nombre: "Sushi Nigiri Especial", precio: 22.50, pais: "Jap√≥n", rating: 4.9, pedidos: 120, ingredientes: ["Arroz sushi", "Salm√≥n fresco", "Wasabi"], pasos: ["Cocer arroz.", "Formar base."], img: "https://images.unsplash.com/photo-1583623025817-d180a2221d0a?auto=format&fit=crop&w=800" },
    { id: 2, nombre: "Carbonara Aut√©ntica", precio: 16.00, pais: "Italia", rating: 4.8, pedidos: 95, ingredientes: ["Spaghetti", "Guanciale", "Pecorino"], pasos: ["Saltear guanciale."], img: "https://images.unsplash.com/photo-1612874742237-6526221588e3?auto=format&fit=crop&w=800" },
    { id: 3, nombre: "Butter Chicken", precio: 19.50, pais: "India", rating: 4.7, pedidos: 210, ingredientes: ["Pollo", "Garam Masala"], pasos: ["Cocinar salsa."], img: "https://images.unsplash.com/photo-1603894584373-5ac82b2ae398?auto=format&fit=crop&w=800" },
    { id: 4, nombre: "Chilaquiles Verdes", precio: 13.00, pais: "M√©xico", rating: 5.0, pedidos: 340, ingredientes: ["Totopos", "Salsa verde"], pasos: ["Ba√±ar totopos."], img: "https://images.unsplash.com/photo-1533089860892-a7c6f0a88666?auto=format&fit=crop&w=800" },
    { id: 5, nombre: "Pato Pek√≠n", precio: 28.50, pais: "China", rating: 4.9, pedidos: 88, ingredientes: ["Pato", "Miel"], pasos: ["Asar."], img: "https://images.unsplash.com/photo-1582234372722-50d7ccc30e5a?auto=format&fit=crop&w=800" },
    { id: 6, nombre: "Pide Turco", precio: 14.00, pais: "Turqu√≠a", rating: 4.6, pedidos: 75, ingredientes: ["Masa", "Cordero"], pasos: ["Hornear."], img: "https://images.unsplash.com/photo-1610132332611-37d457497645?auto=format&fit=crop&w=800" },
    { id: 7, nombre: "Moussaka", precio: 18.50, pais: "Grecia", rating: 4.8, pedidos: 156, ingredientes: ["Berenjenas", "Cordero"], pasos: ["Gratinar."], img: "https://images.unsplash.com/photo-1544333346-64e4fe1820bc?auto=format&fit=crop&w=800" },
    { id: 8, nombre: "Pho Bo", precio: 14.50, pais: "Vietnam", rating: 4.9, pedidos: 230, ingredientes: ["Fideos arroz", "Ternera"], pasos: ["Cocer caldo."], img: "https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?auto=format&fit=crop&w=800" },
    { id: 9, nombre: "Bandeja Paisa", precio: 20.00, pais: "Colombia", rating: 5.0, pedidos: 412, ingredientes: ["Frijoles", "Chicharr√≥n"], pasos: ["Cocer frijoles."], img: "https://images.unsplash.com/photo-1621213348161-00277259114d?auto=format&fit=crop&w=800" },
    { id: 10, nombre: "Ratatouille", precio: 16.50, pais: "Francia", rating: 4.7, pedidos: 95, ingredientes: ["Calabac√≠n", "Berenjena"], pasos: ["Hornear."], img: "https://images.unsplash.com/photo-1572453800999-e8d2d4d0c7ee?auto=format&fit=crop&w=800" },
    { id: 11, nombre: "Fish and Chips", precio: 15.50, pais: "Reino Unido", rating: 4.5, pedidos: 180, ingredientes: ["Bacalao", "Patatas"], pasos: ["Fre√≠r."], img: "https://images.unsplash.com/photo-1524339100590-a2e0ecee29c2?auto=format&fit=crop&w=800" },
    { id: 12, nombre: "Pad Thai", precio: 14.00, pais: "Tailandia", rating: 4.9, pedidos: 289, ingredientes: ["Fideos", "Tamarindo"], pasos: ["Saltear."], img: "https://images.unsplash.com/photo-1559311648-d46f4d8593d8?auto=format&fit=crop&w=800" },
    { id: 13, nombre: "Paella Valenciana", precio: 24.00, pais: "Espa√±a", rating: 4.8, pedidos: 167, ingredientes: ["Arroz bomba", "Azafr√°n"], pasos: ["Cocer arroz."], img: "https://images.unsplash.com/photo-1534080564607-198f9dd5d61a?auto=format&fit=crop&w=800" },
    { id: 14, nombre: "Bibimbap", precio: 17.00, pais: "Corea del Sur", rating: 4.7, pedidos: 142, ingredientes: ["Arroz", "Huevo"], pasos: ["Mezclar."], img: "https://images.unsplash.com/photo-1590301157890-4810ed352733?auto=format&fit=crop&w=800" },
    { id: 15, nombre: "Poutine", precio: 11.50, pais: "Canad√°", rating: 4.4, pedidos: 110, ingredientes: ["Patatas", "Queso"], pasos: ["Ba√±ar con gravy."], img: "https://images.unsplash.com/photo-1586506291535-77adaf651609?auto=format&fit=crop&w=800" },
    { id: 16, nombre: "Tajine", precio: 22.00, pais: "Marruecos", rating: 4.9, pedidos: 75, ingredientes: ["Cordero", "Ciruelas"], pasos: ["Cocer en barro."], img: "https://images.unsplash.com/photo-1541518763669-279f00ed4243?auto=format&fit=crop&w=800" },
    { id: 17, nombre: "Feijoada", precio: 19.00, pais: "Brasil", rating: 4.8, pedidos: 195, ingredientes: ["Frijol negro", "Cerdo"], pasos: ["Guisar."], img: "https://images.unsplash.com/photo-1599307767316-776533bb941c?auto=format&fit=crop&w=800" },
    { id: 18, nombre: "Ceviche Peruano", precio: 16.50, pais: "Per√∫", rating: 5.0, pedidos: 520, ingredientes: ["Pescado", "Lim√≥n"], pasos: ["Marinar."], img: "https://images.unsplash.com/photo-1535567465397-7523840f2ae9?auto=format&fit=crop&w=800" },
    { id: 19, nombre: "Goulash", precio: 17.50, pais: "Hungr√≠a", rating: 4.6, pedidos: 112, ingredientes: ["Res", "Paprika"], pasos: ["Cocer lento."], img: "https://images.unsplash.com/photo-1594911772125-07fc7a2d8d9f?auto=format&fit=crop&w=800" },
    { id: 20, nombre: "Arepa Pabell√≥n", precio: 12.00, pais: "Venezuela", rating: 4.9, pedidos: 315, ingredientes: ["Ma√≠z", "Carne"], pasos: ["Rellenar."], img: "https://images.unsplash.com/photo-1541519227354-08fa5d50c44d?auto=format&fit=crop&w=800" },
    { id: 21, nombre: "Pierogi", precio: 13.50, pais: "Polonia", rating: 4.7, pedidos: 148, ingredientes: ["Masa", "Patata"], pasos: ["Hervir."], img: "https://images.unsplash.com/photo-1626202133282-f8502c70d501?auto=format&fit=crop&w=800" },
    { id: 22, nombre: "D√∂ner Kebap", precio: 11.00, pais: "Alemania", rating: 4.5, pedidos: 610, ingredientes: ["Carne", "Pan pita"], pasos: ["Armar."], img: "https://images.unsplash.com/photo-1561651823-34feb02250e4?auto=format&fit=crop&w=800" },
    { id: 23, nombre: "Adobo Pollo", precio: 15.00, pais: "Filipinas", rating: 4.8, pedidos: 126, ingredientes: ["Pollo", "Soja"], pasos: ["Marinar."], img: "https://images.unsplash.com/photo-1624300627238-d656372cc69e?auto=format&fit=crop&w=800" },
    { id: 24, nombre: "Koshary", precio: 10.50, pais: "Egipto", rating: 4.4, pedidos: 84, ingredientes: ["Lentejas", "Arroz"], pasos: ["Mezclar."], img: "https://images.unsplash.com/photo-1541518763669-279f00ed4243?auto=format&fit=crop&w=800" },
    { id: 25, nombre: "Peking Duck Rolls", precio: 22.00, pais: "China", rating: 4.9, pedidos: 175, ingredientes: ["Pato", "Crepas"], pasos: ["Enrollar."], img: "https://images.unsplash.com/photo-1525755662778-989d0524087e?auto=format&fit=crop&w=800" },
    { id: 26, nombre: "Sancocho", precio: 18.00, pais: "Rep. Dominicana", rating: 4.9, pedidos: 205, ingredientes: ["Carnes", "Yuca"], pasos: ["Cocer."], img: "https://images.unsplash.com/photo-1627308595229-7830a5c91f9f?auto=format&fit=crop&w=800" },
    { id: 27, nombre: "Chakapuli", precio: 21.50, pais: "Georgia", rating: 4.8, pedidos: 67, ingredientes: ["Cordero", "Estrag√≥n"], pasos: ["Guisar."], img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=800" },
    { id: 28, nombre: "Jerk Chicken", precio: 16.00, pais: "Jamaica", rating: 4.9, pedidos: 280, ingredientes: ["Pollo", "Habanero"], pasos: ["Asar."], img: "https://images.unsplash.com/photo-1527477396000-e27163b481c2?auto=format&fit=crop&w=800" },
    { id: 29, nombre: "Borscht", precio: 13.00, pais: "Ucrania", rating: 4.7, pedidos: 142, ingredientes: ["Remolacha", "Crema"], pasos: ["Hervir."], img: "https://images.unsplash.com/photo-1555126634-323283e090fa?auto=format&fit=crop&w=800" },
    { id: 30, nombre: "Dim Sum", precio: 18.00, pais: "Hong Kong", rating: 4.9, pedidos: 530, ingredientes: ["Masa arroz", "Camar√≥n"], pasos: ["Vapor."], img: "https://images.unsplash.com/photo-1563245372-f21724e3856d?auto=format&fit=crop&w=800" },
    { id: 31, nombre: "Schnitzel", precio: 23.00, pais: "Austria", rating: 4.8, pedidos: 115, ingredientes: ["Ternera", "Pan"], pasos: ["Fre√≠r."], img: "https://images.unsplash.com/photo-1599923263479-417366a91ef7?auto=format&fit=crop&w=800" },
    { id: 32, nombre: "Sarma", precio: 15.50, pais: "Rumania", rating: 4.6, pedidos: 92, ingredientes: ["Col", "Carne"], pasos: ["Enrollar."], img: "https://images.unsplash.com/photo-1589113110390-264628f24792?auto=format&fit=crop&w=800" },
    { id: 33, nombre: "Hainanese Rice", precio: 17.00, pais: "Singapur", rating: 4.9, pedidos: 198, ingredientes: ["Pollo", "Jengibre"], pasos: ["Escalfar."], img: "https://images.unsplash.com/photo-1569058242252-62324e7ec990?auto=format&fit=crop&w=800" },
    { id: 34, nombre: "Bobotie", precio: 19.50, pais: "Sud√°frica", rating: 4.5, pedidos: 74, ingredientes: ["Carne", "Curry"], pasos: ["Hornear."], img: "https://images.unsplash.com/photo-1544333346-64e4fe1820bc?auto=format&fit=crop&w=800" },
    { id: 35, nombre: "Khinkali", precio: 14.00, pais: "Georgia", rating: 5.0, pedidos: 420, ingredientes: ["Harina", "Caldo"], pasos: ["Formar saquitos."], img: "https://images.unsplash.com/photo-1625220194771-7ebdea0b70b?auto=format&fit=crop&w=800" },
    { id: 36, nombre: "Ropa Vieja", precio: 18.00, pais: "Cuba", rating: 4.9, pedidos: 310, ingredientes: ["Falda res", "Pimiento"], pasos: ["Desmechar."], img: "https://images.unsplash.com/photo-1599307767316-776533bb941c?auto=format&fit=crop&w=800" }
];

// 2. LA CATEGOR√çA DE PA√çSES (MEN√ö DIN√ÅMICO)
function generateMenu() {
    const menu = document.getElementById('countryMenu');
    
    // Obtenemos pa√≠ses √∫nicos, los ordenamos y a√±adimos 'Todos' al inicio
    const paisesUnicos = [...new Set(recetas.map(r => r.pais))].sort();
    const categorias = ['Todos', ...paisesUnicos];

    menu.innerHTML = categorias.map(p => `
        <button class="filter-btn ${p === currentFilter ? 'active' : ''}" 
                onclick="filterBy('${p}', this)">
            ${p}
        </button>
    `).join('');
}

        // --- INICIALIZACI√ìN AUTOM√ÅTICA DEL MEN√ö ---
        function generateMenu() {
            const menu = document.getElementById('countryMenu');
            const paisesUnicos = ['Todos', ...new Set(recetas.map(r => r.pais))];
            
            menu.innerHTML = paisesUnicos.map(pais => `
                <button class="filter-btn ${pais === 'Todos' ? 'active' : ''}" 
                        onclick="filterBy('${pais}', this)">
                    ${pais}
                </button>
            `).join('');
        }

        function filterBy(pais, el) {
            currentFilter = pais;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            renderGrid();
        }

        function renderGrid() {
            const grid = document.getElementById('recipeGrid');
            const filtered = currentFilter === 'Todos' ? recetas : recetas.filter(r => r.pais === currentFilter);
            
            grid.innerHTML = filtered.map(r => `
                <div class="card animate__animated animate__fadeIn">
                    <div class="img-container" onclick="openRecipe(${r.id})"><img src="${r.img}"></div>
                    <div class="card-body">
                        <small style="color:var(--text-muted); font-weight:700">${r.pais.toUpperCase()}</small>
                        <h3 style="margin:5px 0">${r.nombre}</h3>
                        <p class="price">$${r.precio.toFixed(2)}</p>
                        <button class="btn btn-main" onclick="addToCart(${r.id})">Agregar al Carrito</button>
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
                            <button class="btn btn-outline" onclick="openRecipe(${r.id})">Detalles</button>
                            <a href="${getAIUrl(r)}" target="_blank" class="btn btn-ai"><i data-lucide="sparkles"></i> IA</a>
                        </div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function getAIUrl(r) {
            return `https://www.perplexity.ai/search?q=${encodeURIComponent(`Chef experto: Dame una gu√≠a r√°pida para el platillo "${r.nombre}" de "${r.pais}". Incluye 3 ingredientes sustitutos para el 2026.`)}`;
        }

       function openRecipe(id) {
            const r = recetas.find(x => x.id === id);
            // Simulamos un tiempo de entrega basado en el precio o ID
            const deliveryTime = 25 + (r.id % 3) * 10; 

            document.getElementById('modalImg').style.backgroundImage = `url(${r.img})`;
            document.getElementById('modalBody').innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:start; flex-wrap:wrap; gap:15px">
                    <div>
                        <h1 style="margin-bottom:5px">${r.nombre}</h1>
                        <span style="display:flex; align-items:center; gap:5px; color:var(--text-muted); font-size:0.9rem">
                            <i data-lucide="clock" size="16"></i> Entrega estimada: ${deliveryTime}-${deliveryTime + 10} min
                        </span>
                    </div>
                    <a href="${getAIUrl(r)}" target="_blank" class="btn btn-ai" style="width:auto; padding:10px 20px">
                        <i data-lucide="sparkles"></i> Preguntar a IA
                    </a>
                </div>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:30px; margin-top:25px">
                    <div style="background:var(--bg); padding:20px; border-radius:20px; border: 1px solid var(--border)">
                        <h4 style="margin-top:0">üìã Ingredientes</h4>
                        <ul style="padding-left:18px; line-height:1.6">${r.ingredientes.map(i => `<li>${i}</li>`).join('')}</ul>
                    </div>
                    <div>
                        <h4 style="margin-top:0">üë®‚Äçüç≥ Preparaci√≥n</h4>
                        <ol style="color:var(--text-muted); padding-left:18px">${r.pasos.map(p => `<li style="margin-bottom:10px">${p}</li>`).join('')}</ol>
                    </div>
                </div>

                <div style="margin-top:30px; padding-top:20px; border-top:1px solid var(--border)">
                    <button class="btn btn-main" style="font-size:1.1rem; padding:18px" onclick="addToCart(${r.id}); closeModal();">
                        <i data-lucide="shopping-cart"></i> A√±adir al Pedido - $${r.precio.toFixed(2)}
                    </button>
                </div>
            `;
            document.getElementById('recipeModal').style.display = "flex";
            lucide.createIcons();
        }

        function addToCart(id) {
            const r = recetas.find(x => x.id === id);
            const inCart = cart.find(c => c.id === id);
            if(inCart) inCart.qty++; else cart.push({...r, qty: 1});
            updateCart();
            Swal.fire({ toast: true, position: 'top-end', icon: 'success', title: 'A√±adido', showConfirmButton: false, timer: 1000 });
        }

        function updateCart() {
            const list = document.getElementById('cart-list');
            let total = 0;
            list.innerHTML = cart.map(item => {
                total += item.precio * item.qty;
                return `<div style="display:flex; gap:12px; margin-bottom:15px; align-items:center">
                    <img src="${item.img}" style="width:50px; height:50px; border-radius:12px; object-fit:cover">
                    <div style="flex-grow:1"><h5 style="margin:0">${item.nombre}</h5><small>$${item.precio} x ${item.qty}</small></div>
                    <button onclick="removeItem(${item.id})" style="border:none; background:none; color:#ff4444; cursor:pointer"><i data-lucide="trash-2" size="18"></i></button>
                </div>`;
            }).join('');
            
            document.getElementById('cart-count').innerText = cart.reduce((a,b) => a + b.qty, 0);
            document.getElementById('cart-total').innerText = `$${total.toFixed(2)}`;
            
            const rem = 50 - total;
            document.getElementById('shipping-msg').innerHTML = rem > 0 
                ? `Faltan <span style="color:var(--primary)">$${rem.toFixed(2)}</span> para env√≠o gratis` 
                : "üéâ ¬°Tienes env√≠o gratis!";
            lucide.createIcons();
        }

        function toggleTheme() {
            const isDark = document.body.dataset.theme === 'dark';
            document.body.dataset.theme = isDark ? '' : 'dark';
            document.getElementById('theme-icon').setAttribute('data-lucide', isDark ? 'sun' : 'moon');
            lucide.createIcons();
        }

        function toggleCart() { document.getElementById('cart-drawer').classList.toggle('open'); }
        function closeModal() { document.getElementById('recipeModal').style.display = "none"; }
        function removeItem(id) { cart = cart.filter(c => c.id !== id); updateCart(); }

        function sendOrder() {
            if(cart.length === 0) return Swal.fire('Carrito vac√≠o', 'Agrega algo antes de pedir', 'warning');
            let msg = `*GourmetWorld - Nuevo Pedido*\n---\n` + cart.map(i => `‚Ä¢ ${i.qty}x ${i.nombre}`).join('\n') + `\n---\n*Total: ${document.getElementById('cart-total').innerText}*`;
            window.open(`https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(msg)}`);
        }

        // Ejecuci√≥n inicial
        generateMenu();
        renderGrid();
    </script>
</body>
</html>
    
  </body>
  
</html>
